# 19.3 Encodingクラス

- `string.encode(encoding)` : `string` のエンコーディングを `encoding` に変換した文字列を返す
    - `encoding` : エンコーディング名の文字列

    ```
    >> str = "こんにちは"
    => "こんにちは"
    >> str.encoding
    => #<Encoding:UTF-8>
    >> str2 = str.encode("Shift_JIS")
    => "\x{82B1}\x{82F1}\x{82C9}\x{82BF}\x{82CD}"
    >> str2.encoding
    => #<Encoding:Shift_JIS>
    ```

```
>> str1 = "こんにちは"
=> "こんにちは"
>> str1.encoding
=> #<Encoding:UTF-8>
>> str2 = "あいうえお".encode("Shift_JIS")
=> "\x{82A0}\x{82A2}\x{82A4}\x{82A6}\x{82A8}"
>> str2.encoding
=> #<Encoding:Shift_JIS>
>> str3 = str1 + str2
Traceback (most recent call last):
        4: from /Users/goh/.rbenv/versions/2.6.5/bin/irb:23:in `<main>'
        3: from /Users/goh/.rbenv/versions/2.6.5/bin/irb:23:in `load'
        2: from /Users/goh/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/irb-1.0.0/exe/irb:11:in `<top (required)>'
        1: from (irb):10
Encoding::CompatibilityError (incompatible character encodings: UTF-8 and Shift_JIS)
```

エンコーディングがそろっていないと連結できない

```
goh@goh ~/s/g/u/enjoyable_ruby> irb --simple-prompt
>> p "あ" == "あ".encode("Shift_JIS")
false
=> false
```

内容が同じでもエンコーディングが異なっていると、異なる文字列とみなされる

- `Encoding.compatible?(str1, str2)` : `str1` と `str2` に互換性があれば(連結できれば)、連結した結果得られる文字列の `Encoding` オブジェクトを返す
    - `str1` : 比較対象の文字列
    - `str2` : 比較対象の文字列

    ```
    > p Encoding.compatible?("AB".encode("Shift_JIS"), "あ".encode("UTF-8"))
    #<Encoding:UTF-8>
    => #<Encoding:UTF-8>
    >> p Encoding.compatible?("あ".encode("Shift_JIS"), "あ".encode("UTF-8"))
    nil
    => nil
    ```

    「AB」はShift_JIS、UTF-8のどちらでも同じため、連結できる

